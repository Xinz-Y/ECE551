#include <cstdlib>
#include <cstring>

#include "Page.hpp"

class Story {
 private:
  //Page * head;
  // Page * win_page;
  // Page * lose_page;
  std::vector<Page> pages;
  size_t win_page;
  size_t lose_page;
  int total_PgNum;

 public:
  Story() : win_page(-1), lose_page(-1), total_PgNum(0){};
  Story & makeStory(const std::string & dirName) {
    // go through the whole directory
    std::fstream fs;
    int pg_num = 1;
    // each iteration add a file into story
    while (true) {
      std::string fileName = dirName;
      fileName.append("page");
      fileName.append(std::to_string(pg_num));
      fs.open(fileName);
      if (!fs.is_open()) {
        if (pg_num == 1) {
          std::cerr << "Your directory does not have the page1.txt"
                    << "\n";
          exit(EXIT_FAILURE);
        }
        std::cout << "Load the dir is finished!" << '\n';
        break;
      }
      // if it is open succesfully, then load the file as normal
      pages.push_back(Page(fileName));
      total_PgNum++;
      pg_num++;
    }
    // now we need to find which one is the winPg and the losePg one
    for (std::vector<Page>::const_iterator it = pages.begin(); it != pages.end(); ++it) {
      if ((*it).IsWinPg()) {
      }
    }

    return *this;
  }
};
